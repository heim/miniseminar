







Intro:

DevOps (Developer-Operations)
- Utviklerer tar kontroll over drift
- Skripting av deploy
- Cloud
- Infrastruktur som kode.
- Like miljøer


Disclaimer

Rubyist og *nix-sentrisk. Det kommer til å gå fort. Jeg er glad i kommandolinja. Jeg så sånn ut når jeg satt på kjøkkenet i går og snekra slider. Spør underveis eller snakk med meg etterpå.

Snakke mer om cloud og infrastruktur som kode, like miljøer.

Cloud:
Amazon, en hel bråte med cloudtjenester. MEst kjent ec2 og s3
 EC2 - Amazon announced a limited public beta of EC2 on August 25, 2006, Byttet amazon.com til ec2 og aws 
 Rackspace
 Linode
 Heroku (kjører på ec2)
 
 Vagrant.
 
 
- automatisering av virtuelle maskiner.
- genialt til lokale utviklingsmiljø
- bytt mellom forskjellige oppsett
- alle avhengigheter pakket i samme pakke.
- bygd på virtualbox, og rake. open source.

- basis-boks.
- håndterer ssh-keys og alt. nice.

Kjapp demo:
  - vagrant init
  - vagrant up
  - vagrant ssh
blank maskin

Infrastruktur som kode:
  - Deklarativ konfigurasjon av infrastruktur. Sjekkes inn i kildekoden. Kjøres på testmiljø og prodmiljø. 
  - Puppet
  - Chef
  Hipp som happ, vise puppet, mer konsis kode.
  
  Eksempel-manifest.
  class webserver {
    package { "apache2":
      ensure => present,
    }

    service { "apache2":
      ensure => running,
      require => Package["apache2"],
    }
  }

  include webserver

- idempotent, kan kjøres flere ganger.



Men vent. hva med puppet-
- lag kjapt manifest (eller kopier)
- endre vagrantfile (provisioner og port-forward)
  -vagrant reload
  vips: http://localhost:8080
  
  
Fog -taakeheimen
 - abstraksjon over forskjellige cloudleverandører.
 - fog.io
 - ruby-bibliotek
 
 'gem install fog'
 
 $ fog
 
 server.ssh("whoami")
 
 

 connection = Compute[:aws]

 server = c.servers.bootstrap(:private_key_path => '~/.ssh/id_rsa', :public_key_path => '~/.ssh/id_rsa.pub', :username => 'ubuntu')
 server.ssh("sudo apt-get update -y -q")
 server.ssh("sudo apt-get install -y -q apache2")
 server.ssh("sudo rm /var/www/index.html")
 server.ssh("sudo chown ubuntu:ubuntu /var/www")
 server.ssh("echo 'hello NTNU' > /var/www/index.html")

 
 
 connection = Compute[:aws]
 
 
 
Automate it
  thor.
  lite bibliotek for å lage raske kommandolinje utils
  
 
 
 

  